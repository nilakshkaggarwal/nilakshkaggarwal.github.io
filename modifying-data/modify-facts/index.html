



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://genie.o9solutions.com/industry-solutions/IbplQuickRef/modifying-data/modify-facts/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>Modify facts - IBPL Quick Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#modify-facts" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://genie.o9solutions.com/industry-solutions/IbplQuickRef/" title="IBPL Quick Reference" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                IBPL Quick Reference
              </span>
              <span class="md-header-nav__topic">
                Modify facts
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://genie.o9solutions.com/industry-solutions/IbplQuickRef/" title="IBPL Quick Reference" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    IBPL Quick Reference
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../querying-data/querying-data/" title="Querying data" class="md-nav__link">
      Querying data
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Modifying data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Modifying data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../modifying-data/" title="Summary" class="md-nav__link">
      Summary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modify-members/" title="Modify members" class="md-nav__link">
      Modify members
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Modify facts
      </label>
    
    <a href="./" title="Modify facts" class="md-nav__link md-nav__link--active">
      Modify facts
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cartesian-scope" title="cartesian scope" class="md-nav__link">
    cartesian scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#regular-scope" title="regular scope" class="md-nav__link">
    regular scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluatemember-scope" title="evaluatemember scope" class="md-nav__link">
    evaluatemember scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recurrence-scope" title="recurrence scope" class="md-nav__link">
    recurrence scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-scope" title="block scope" class="md-nav__link">
    block scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spread-scope" title="spread scope" class="md-nav__link">
    spread scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-scope" title="graph scope" class="md-nav__link">
    graph scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copymeasure" title="copymeasure" class="md-nav__link">
    copymeasure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update" title="update" class="md-nav__link">
    update
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-data-for-model" title="delete data for model" class="md-nav__link">
    delete data for model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-data-for-relationshiptype" title="delete data for relationshiptype" class="md-nav__link">
    delete data for relationshiptype
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../transferring-data/transferring-data/" title="Transferring data" class="md-nav__link">
      Transferring data
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Formats
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Formats
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/number/" title="Number" class="md-nav__link">
      Number
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/datetime/" title="Date Time" class="md-nav__link">
      Date Time
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Operators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Operators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operators/Arithmetic/" title="Arithmetic" class="md-nav__link">
      Arithmetic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operators/relational/" title="Relational" class="md-nav__link">
      Relational
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operators/Logical/" title="Logical" class="md-nav__link">
      Logical
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operators/Special-Operator/" title="Special operators" class="md-nav__link">
      Special operators
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/numeric/" title="Numeric" class="md-nav__link">
      Numeric
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/time/" title="Time Functions" class="md-nav__link">
      Time Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/conditional/" title="Conditional" class="md-nav__link">
      Conditional
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/analytical/" title="Analytical" class="md-nav__link">
      Analytical
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../spreading/spreading/" title="Spreading" class="md-nav__link">
      Spreading
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Data Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Data Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../controlling-access/data-security/" title="Data Security Original" class="md-nav__link">
      Data Security Original
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../controlling-access/roles/" title="User Roles" class="md-nav__link">
      User Roles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../controlling-access/rules/" title="Rules" class="md-nav__link">
      Rules
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cartesian-scope" title="cartesian scope" class="md-nav__link">
    cartesian scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#regular-scope" title="regular scope" class="md-nav__link">
    regular scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluatemember-scope" title="evaluatemember scope" class="md-nav__link">
    evaluatemember scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recurrence-scope" title="recurrence scope" class="md-nav__link">
    recurrence scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-scope" title="block scope" class="md-nav__link">
    block scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spread-scope" title="spread scope" class="md-nav__link">
    spread scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-scope" title="graph scope" class="md-nav__link">
    graph scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copymeasure" title="copymeasure" class="md-nav__link">
    copymeasure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update" title="update" class="md-nav__link">
    update
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-data-for-model" title="delete data for model" class="md-nav__link">
    delete data for model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-data-for-relationshiptype" title="delete data for relationshiptype" class="md-nav__link">
    delete data for relationshiptype
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="modify-facts">Modify facts</h1>
<p>Fact data can be modified through scope , exec plugin, copymeasure and update statements.</p>
<h2 id="cartesian-scope">cartesian scope</h2>
<p>This can be used to create a small set of intersections at all possible combinations of members specified and assign a constant value to it. Be careful because if member filters are not specified, a lot of intersections would be created. Fact file upload might be a preferable method to create large number of specific intersections.</p>
<p>Assuming granularity as specified in the select statement and 4 members in <code>Time.Year</code> level attribute viz <code>2016, 2017, 2018 and 2019</code> in Year levelattribute, below select query returns zero records to start with. The measure had been created for counting SKU's active in a year. It can be aggregated along various dimensions.</p>
<div class="codehilite"><pre><span></span><span class="k">select</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="p">]</span> <span class="o">*</span> 
    <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">].</span><span class="n">filter</span><span class="p">(</span><span class="o">#</span><span class="p">.</span><span class="n">Name</span> <span class="k">in</span> <span class="err">{</span><span class="ss">&quot;Liril Fresh - 75&quot;</span><span class="p">,</span> <span class="ss">&quot;Fructis Shine - 100&quot;</span> <span class="err">}</span><span class="p">)</span> <span class="o">*</span>
    <span class="err">{</span><span class="n">Measure</span><span class="p">.[</span><span class="n">SKUByYear</span><span class="p">]</span><span class="err">}</span><span class="p">)</span>
    <span class="k">limit</span> <span class="mi">10</span><span class="p">;</span>
</pre></div>


<p>Below cartesian scope limits the SKU's to two members but takes all Year members.</p>
<div class="codehilite"><pre><span></span><span class="n">cartesian</span> <span class="k">scope</span><span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="p">]</span> <span class="o">*</span>
    <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">].</span><span class="n">filter</span><span class="p">(</span><span class="o">#</span><span class="p">.</span><span class="n">Name</span> <span class="k">in</span> <span class="err">{</span><span class="ss">&quot;Liril Fresh - 75&quot;</span><span class="p">,</span> <span class="ss">&quot;Fructis Shine - 100&quot;</span> <span class="err">}</span><span class="p">));</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUByYear</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>
</pre></div>


<p>The earlier select statement would return 8 records now.</p>
<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year</th>
<th>SKU</th>
<th>SKUByYear</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>2016</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016</td>
<td>Liril Fresh - 75</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017</td>
<td>Liril Fresh - 75</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018</td>
<td>Liril Fresh - 75</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2019</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2019</td>
<td>Liril Fresh - 75</td>
<td>1</td>
</tr>
</tbody>
</table>
<h2 id="regular-scope">regular scope</h2>
<p>Regular scope statement can be used to assign null or constant values and also carry out computations. </p>
<p>If <code>SKUByYear</code> had 8 intersections as described in previous example for 4 years 2016, 2017, 2018 and 2019 and two SKU's 'Liril Fresh - 75' and 'Fructis Shine - 100' , then below scope statement would null out 4 of them for 'Liril Fresh - 75' and a select query for <code>SKUByYear</code> would return only 4 rows for the other SKU.</p>
<div class="codehilite"><pre><span></span><span class="k">scope</span><span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="p">]</span> <span class="o">*</span>
        <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">].[</span><span class="n">Liril</span> <span class="n">Fresh</span> <span class="o">-</span> <span class="mi">75</span><span class="p">]);</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUByYear</span><span class="p">]</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year</th>
<th>SKU</th>
<th>SKUByYear</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>2016</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2019</td>
<td>Fructis Shine - 100</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Let's say you want to compute Revenue = UnitsSold * SKUPrice . </p>
<p>One could run a computation based on two measures as shown below. Note that the computation updates <code>Revenue</code> only in the case where <code>Price</code> is not zero else it's kept null ( for 'Liril Shine - 75' for year '2017').</p>
<div class="codehilite"><pre><span></span><span class="k">scope</span><span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="p">]</span> <span class="o">*</span>
        <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">]);</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">Revenue</span><span class="p">]</span> <span class="o">=</span> <span class="k">if</span> <span class="p">(</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUPrice</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> 
                      <span class="k">then</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUPrice</span><span class="p">]</span> <span class="o">*</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">UnitsSold</span><span class="p">]</span> 
                      <span class="k">else</span> <span class="k">null</span><span class="p">;</span>
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year</th>
<th>SKU</th>
<th>SKUPrice</th>
<th>UnitsSold</th>
<th>Revenue</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>2016</td>
<td>Liril Shine - 75</td>
<td>100</td>
<td>20</td>
<td>2,000</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016</td>
<td>Liril Strong - 100</td>
<td>150</td>
<td>10</td>
<td>1,500</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017</td>
<td>Liril Shine - 75</td>
<td>0</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017</td>
<td>Liril Strong - 100</td>
<td>160</td>
<td>11</td>
<td>1,760</td>
</tr>
</tbody>
</table>
<h2 id="evaluatemember-scope">evaluatemember scope</h2>
<p>Usually evaluatemember is used to create intersections in an finer granularity on the basis of another measure at a coarser granularity. To give an example, consider SKULanchDate and SKUWithdrawalDate measures are available by Version and SKU . We need to populate SKUActiveFlag grained by Version, SKU and Year-Month. SKUActiveFlag needs to be marked as 1 in buckets where the SKU is active and new intersection created. This involves comparing the Year-Month levelattribute key with the measure.</p>
<p>Below are the input measures fetched using a select query. Dates are in mm/dd/yyyy format.</p>
<div class="codehilite"><pre><span></span><span class="k">select</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span>  <span class="o">*</span> <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">]</span> <span class="o">*</span>
    <span class="err">{</span><span class="n">Measure</span><span class="p">.[</span><span class="n">SKULaunchDate</span><span class="p">],</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUWithdrawalDate</span><span class="p">]</span><span class="err">}</span> <span class="p">)</span>
<span class="k">limit</span> <span class="mi">100</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>SKU</th>
<th>SKULaunchDate</th>
<th>SKUWithdrawalDate</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Fresh - 75</td>
<td>2/10/2017</td>
<td>4/10/2017</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Strong - 100</td>
<td>3/20/2018</td>
<td>6/20/2018</td>
</tr>
</tbody>
</table>
<p>The <code>SKUActiveFlag</code> and it's measuregroup have no data (i.e. no intersections) to begin with. Below scope statement will populate them using evaluate member. Note that each Year-Month member's key is set to the 1st day of that month.</p>
<div class="codehilite"><pre><span></span><span class="n">evaluatemember</span> <span class="k">scope</span><span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> 
        <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="o">-</span><span class="k">Month</span><span class="p">]);</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUActiveFlag</span><span class="p">]</span> <span class="o">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">Time</span><span class="p">.</span><span class="o">#</span><span class="p">.</span><span class="k">Key</span> <span class="o">&gt;=</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">SKULaunchDate</span><span class="p">]</span> 
                                    <span class="o">&amp;&amp;</span> <span class="n">Time</span><span class="p">.</span><span class="o">#</span><span class="p">.</span><span class="k">Key</span> <span class="o">&lt;</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUWithdrawalDate</span><span class="p">])</span> 
                                <span class="k">then</span> <span class="mi">1</span> 
                                <span class="k">else</span> <span class="k">null</span><span class="p">;</span> 
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>SKUActiveFlag</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>2017-M3</td>
<td>Liril Fresh - 75</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017-M4</td>
<td>Liril Fresh - 75</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M4</td>
<td>Liril Strong - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M5</td>
<td>Liril Strong - 100</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M6</td>
<td>Liril Strong - 100</td>
<td>1</td>
</tr>
</tbody>
</table>
<h2 id="recurrence-scope">recurrence scope</h2>
<h2 id="block-scope">block scope</h2>
<p>A block scope is a <a href="#regular-scope">regular scope</a> whose LS computation method has been changed for achieving better performance. Please refer to GraphCube guide for details on some restrictions on it. Below is a simplistic explanation of the same.</p>
<p>Let's say you want to calculate error in forecast when compared to the actual orders for an item we ship from our factory. Two measures <code>Forecast</code> and <code>Actuals</code> are already available. One can compute the error using two calculations</p>
<ul>
<li>Error = Forecast - Actuals</li>
<li>AbsoluteError = ABS ( Forecast - Actuals )</li>
</ul>
<p>The above are used just for illustration purposes, refer to any forecasting book for better ways to compute forecast accuracy. If one were to sum up the two measures, in case of calculation 1 the total error at an aggregate level might be lower due to +ve and -ve numbers, but in calcualation 2 the total error at an aggregate level will reflect it better.</p>
<p>All the measures belong to the same measuregroup. Below is a block scope.</p>
<div class="codehilite"><pre><span></span><span class="n">block</span> <span class="k">scope</span><span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="p">]</span> <span class="o">*</span>
    <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">]);</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">Error</span><span class="p">]</span> <span class="o">=</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">Forecast</span><span class="p">]</span> <span class="o">-</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">Actuals</span><span class="p">];</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">AbsoluteError</span><span class="p">]</span> <span class="o">=</span> <span class="k">abs</span><span class="p">(</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">Forecast</span><span class="p">]</span> <span class="o">-</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">Actuals</span><span class="p">]</span> <span class="p">);</span>
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>
</pre></div>


<p>Without block scope (i.e. regular scope) the computation would run according to the sequence 1,2,3,4 .. as indicated below</p>
<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>ErrorComp</th>
<th>AbsoluteErrorComp</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>2017-M3</td>
<td>Liril Fresh - 75</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017-M4</td>
<td>Liril Fresh - 75</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M4</td>
<td>Liril Strong - 100</td>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M5</td>
<td>Liril Strong - 100</td>
<td>4</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>With block scope the computation would run according to the sequence 1,2,3,4 .. as indicated below. The computation happens row-wise processing each row at once and hence reading-writing row for all the columns in that row. This is faster than the regular scope approach.</p>
<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>ErrorComp</th>
<th>AbsoluteErrorComp</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>2017-M3</td>
<td>Liril Fresh - 75</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2017-M4</td>
<td>Liril Fresh - 75</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M4</td>
<td>Liril Strong - 100</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2018-M5</td>
<td>Liril Strong - 100</td>
<td>4</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>The above is only an analogy for ease of understanding. The actual GraphCube code may implement it differently.</p>
<h2 id="spread-scope">spread scope</h2>
<p>There are various types of spreading available within the system. Please refer to the Graph Cube guide for configuration of the same. Below focusses on how the syntax works for the same.</p>
<p>One may have data for launch and withdrawal dates grained by Version and SKU. This could be converted to time-grained SKUActiveFlag using <a href="#evaluatemember-scope">evaluatemember scope</a>. It might happen that one needs to setup an adjustment factor which needs to sum up to a specific value at aggregate level, but needs to spread equally in all the buckets in which SKUActiveFlag is setup.</p>
<p>Spreading config has two settings</p>
<table>
<thead>
<tr>
<th>Basis Measure Type</th>
<th>Basis Measure</th>
<th>SpreadingType</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basis Measure</td>
<td>SKUActiveFlag</td>
<td>DistributeToLeaves</td>
</tr>
<tr>
<td>Assortment Basis Measure</td>
<td>SKUActiveFlag</td>
<td>DistributeToLeaves</td>
</tr>
</tbody>
</table>
<p>Below two spread scope statements would update SKUAdjFactor as indicated in the table after the statements.</p>
<div class="codehilite"><pre><span></span><span class="n">spread</span> <span class="k">scope</span> <span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span>
        <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">].[</span><span class="n">Liril</span> <span class="n">Fresh</span> <span class="o">-</span> <span class="mi">75</span><span class="p">]);</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUAdjFactor</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>

<span class="n">spread</span> <span class="k">scope</span> <span class="p">:</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span> <span class="o">*</span> 
        <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">].[</span><span class="n">Liril</span> <span class="n">Strong</span> <span class="o">-</span> <span class="mi">100</span><span class="p">]);</span>
    <span class="n">Measure</span><span class="p">.[</span><span class="n">SKUAdjFactor</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="k">end</span> <span class="k">scope</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>SKU</th>
<th>Year-Month</th>
<th>SKUActiveFlag</th>
<th>SKUAdjFactor</th>
</tr>
</thead>
<tbody>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Fresh - 75</td>
<td>2017-M3</td>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Fresh - 75</td>
<td>2017-M4</td>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Strong - 100</td>
<td>2018-M4</td>
<td>1</td>
<td>33</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Strong - 100</td>
<td>2018-M5</td>
<td>1</td>
<td>33</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>Liril Strong - 100</td>
<td>2018-M6</td>
<td>1</td>
<td>33</td>
</tr>
</tbody>
</table>
<h2 id="graph-scope">graph scope</h2>
<p>Example:</p>
<p>Graph- Production Pegging </p>
<table>
<thead>
<tr>
<th>From</th>
<th>To</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item.[Item]</td>
<td>Item.[Item]</td>
</tr>
<tr>
<td>Location.[Location]</td>
<td>Location.[Location]</td>
</tr>
<tr>
<td>Activity.[Activity]</td>
<td>Order.[Order Name]</td>
</tr>
<tr>
<td>Time.[FiscalWeek]</td>
<td>Time.[FiscalWeek]</td>
</tr>
<tr>
<td>Lot.[Lot ID</td>
<td>Customer.[CustomerID]</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Edge Property</th>
</tr>
</thead>
<tbody>
<tr>
<td>Material Production Pegged Quantity</td>
</tr>
<tr>
<td>MaterialConstraintQty</td>
</tr>
<tr>
<td>MaterialConstraintType</td>
</tr>
</tbody>
</table>
<div class="codehilite"><pre><span></span><span class="k">Select</span> <span class="p">(</span><span class="k">From</span><span class="p">.[</span><span class="n">Time</span><span class="p">].[</span><span class="n">Fiscal</span> <span class="n">Week</span><span class="p">]</span><span class="o">*</span> <span class="k">From</span><span class="p">.[</span><span class="n">Activity</span><span class="p">].[</span><span class="n">Activity</span><span class="p">]</span> <span class="o">*</span> 
<span class="k">From</span><span class="p">.[</span><span class="n">Item</span><span class="p">].[</span><span class="n">Item</span><span class="p">]</span> <span class="o">*</span> <span class="k">From</span><span class="p">.[</span><span class="k">Location</span><span class="p">].[</span><span class="k">Location</span><span class="p">]</span> <span class="o">*</span> <span class="k">From</span><span class="p">.[</span><span class="n">Lot</span><span class="p">].[</span><span class="n">Lot</span> <span class="n">ID</span><span class="p">]</span> <span class="o">*</span> 
<span class="k">To</span><span class="p">.[</span><span class="n">Customer</span><span class="p">].[</span><span class="n">Customer</span> <span class="n">Name</span><span class="p">]</span> <span class="o">*</span> <span class="k">To</span><span class="p">.[</span><span class="n">Item</span><span class="p">].[</span><span class="n">Item</span><span class="p">]</span> <span class="o">*</span> <span class="k">To</span><span class="p">.[</span><span class="k">Location</span><span class="p">].[</span><span class="k">Location</span><span class="p">]</span> <span class="o">*</span> 
<span class="k">To</span><span class="p">.[</span><span class="k">Order</span><span class="p">].[</span><span class="k">Order</span> <span class="n">Name</span><span class="p">]</span> <span class="o">*</span> <span class="k">To</span><span class="p">.[</span><span class="n">Time</span><span class="p">].[</span><span class="n">Fiscal</span> <span class="n">Week</span><span class="p">])</span> <span class="k">on</span> <span class="k">row</span><span class="p">,</span> 
<span class="p">(</span><span class="err">{</span><span class="n">Edge</span><span class="p">.[</span><span class="n">Production_Pegging</span><span class="p">].[</span><span class="n">Material</span> <span class="n">Production</span> <span class="n">Pegged</span> <span class="n">Quantity</span><span class="p">]</span> <span class="p">,</span> 
<span class="n">Edge</span><span class="p">.[</span><span class="n">Production_Pegging</span><span class="p">].[</span><span class="n">MaterialConstraintQty</span><span class="p">]</span> <span class="p">,</span> 
<span class="n">Edge</span><span class="p">.[</span><span class="n">Production_Pegging</span><span class="p">].[</span><span class="n">MaterialConstraintType</span><span class="p">]</span><span class="err">}</span><span class="p">)</span> <span class="k">on</span> <span class="k">column</span> 
<span class="k">where</span> <span class="err">{</span><span class="n">RelationshipType</span><span class="p">.[</span><span class="n">Production_Pegging</span><span class="p">],</span> <span class="k">Version</span><span class="p">.[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">]</span><span class="err">}</span><span class="p">;</span>
</pre></div>


<p>result:</p>
<table>
<thead>
<tr>
<th>Fiscal Week</th>
<th>Activity</th>
<th>Item</th>
<th>Location</th>
<th>Lot ID</th>
<th>Customer Name</th>
<th>Item</th>
<th>Location</th>
<th>Order Name</th>
<th>Fiscal Week</th>
<th>Material Production Pegged Quantity</th>
<th>MaterialConstraintQty</th>
<th>MaterialConstraintType</th>
</tr>
</thead>
<tbody>
<tr>
<td>W01-2015</td>
<td>BOH Activity</td>
<td>RM_1</td>
<td>Plant_1</td>
<td>SCS BOH</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W01-2015</td>
<td>BOH Activity</td>
<td>RM_1</td>
<td>Plant_1</td>
<td>SCS BOH</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W01-2015</td>
<td>BOH Activity</td>
<td>RM_2</td>
<td>Plant_1</td>
<td>SCS BOH</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W01-2015</td>
<td>BOH Activity</td>
<td>RM_2</td>
<td>Plant_1</td>
<td>SCS BOH</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W02-2015</td>
<td>FG_1 - Shipment via Water from - Plant_1 to DC_1</td>
<td>FG_1</td>
<td>DC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td></td>
<td>400</td>
<td>LeadtimePlanBeforeCurrent</td>
</tr>
<tr>
<td>W02-2015</td>
<td>Sub-Assembly for FG_1 - RM_1 converted to INT_11 at Plant_1</td>
<td>INT_11</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W02-2015</td>
<td>Sub-Assembly for FG_1 - RM_2 converted to INT_21 at Plant_1</td>
<td>INT_21</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W03-2015</td>
<td>Final Assembly for FG_1 at Plant_1</td>
<td>FG_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W04-2015</td>
<td>FG_1 - Shipment via Air from Plant_1 to DC_1</td>
<td>FG_1</td>
<td>DC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W05-2015</td>
<td>FG_1 - Shipment via Air from DC_1 to RDC_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W25-2015</td>
<td>Sub-Assembly for FG_1 - RM_1 converted to INT_11 at Plant_1</td>
<td>INT_11</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W25-2015</td>
<td>Sub-Assembly for FG_1 - RM_2 converted to INT_21 at Plant_1</td>
<td>INT_21</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W25-2015</td>
<td>Expected Reciept Activity(1)</td>
<td>RM_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td></td>
<td>200</td>
<td>MaterialShort</td>
</tr>
<tr>
<td>W25-2015</td>
<td>Expected Reciept Activity(1)</td>
<td>RM_2</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td></td>
<td>200</td>
<td>MaterialShort</td>
</tr>
<tr>
<td>W26-2015</td>
<td>Final Assembly for FG_1 at Plant_1</td>
<td>FG_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W29-2015</td>
<td>FG_1 - Shipment via Water from - Plant_1 to DC_1</td>
<td>FG_1</td>
<td>DC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W31-2015</td>
<td>FG_1 - Shipment via Water from DC_1 to RDC_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<p>Graph- Consumption Pegging</p>
<table>
<thead>
<tr>
<th>From</th>
<th>To</th>
</tr>
</thead>
<tbody>
<tr>
<td>Item.[Item]</td>
<td>Item.[Item]</td>
</tr>
<tr>
<td>Location.[Location]</td>
<td>Location.[Location]</td>
</tr>
<tr>
<td>Activity.[Activity]</td>
<td>Order.[Order Name]</td>
</tr>
<tr>
<td>Time.[FiscalWeek]</td>
<td>Time.[FiscalWeek]</td>
</tr>
<tr>
<td>Lot.[Lot ID</td>
<td>Customer.[CustomerID]</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Edge Property</th>
</tr>
</thead>
<tbody>
<tr>
<td>Material Consumption Pegged Quantity</td>
</tr>
</tbody>
</table>
<div class="codehilite"><pre><span></span><span class="k">Select</span> <span class="p">(</span><span class="k">From</span><span class="p">.[</span><span class="n">Time</span><span class="p">].[</span><span class="n">Fiscal</span> <span class="n">Week</span><span class="p">]</span><span class="o">*</span><span class="k">From</span><span class="p">.[</span><span class="n">Activity</span><span class="p">].[</span><span class="n">Activity</span><span class="p">]</span><span class="o">*</span>
<span class="k">From</span><span class="p">.[</span><span class="n">Item</span><span class="p">].[</span><span class="n">Item</span><span class="p">]</span><span class="o">*</span><span class="k">From</span><span class="p">.[</span><span class="k">Location</span><span class="p">].[</span><span class="k">Location</span><span class="p">]</span><span class="o">*</span><span class="k">From</span><span class="p">.[</span><span class="n">Lot</span><span class="p">].[</span><span class="n">Lot</span> <span class="n">ID</span><span class="p">]</span><span class="o">*</span>
<span class="k">To</span><span class="p">.[</span><span class="n">Customer</span><span class="p">].[</span><span class="n">Customer</span> <span class="n">Name</span><span class="p">]</span><span class="o">*</span><span class="k">To</span><span class="p">.[</span><span class="n">Item</span><span class="p">].[</span><span class="n">Item</span><span class="p">]</span><span class="o">*</span><span class="k">To</span><span class="p">.[</span><span class="k">Location</span><span class="p">].[</span><span class="k">Location</span><span class="p">]</span><span class="o">*</span>
<span class="k">To</span><span class="p">.[</span><span class="k">Order</span><span class="p">].[</span><span class="k">Order</span> <span class="n">Name</span><span class="p">]</span><span class="o">*</span><span class="k">To</span><span class="p">.[</span><span class="n">Time</span><span class="p">].[</span><span class="n">Fiscal</span> <span class="n">Week</span><span class="p">])</span> <span class="k">on</span> <span class="k">row</span><span class="p">,</span> 
<span class="p">(</span><span class="err">{</span><span class="n">Edge</span><span class="p">.[</span><span class="n">Consumption_Pegging</span><span class="p">].[</span><span class="n">Material</span> <span class="n">Consumption</span> <span class="n">Pegged</span> <span class="n">Quantity</span><span class="p">]</span><span class="err">}</span><span class="p">)</span> <span class="k">on</span> <span class="k">column</span> 
<span class="k">where</span> <span class="err">{</span><span class="n">RelationshipType</span><span class="p">.[</span><span class="n">Consumption_Pegging</span><span class="p">],</span> <span class="k">Version</span><span class="p">.[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">]</span><span class="err">}</span><span class="p">;</span>
</pre></div>


<p>Result:</p>
<table>
<thead>
<tr>
<th>Fiscal Week</th>
<th>Activity</th>
<th>Item</th>
<th>Location</th>
<th>Lot ID</th>
<th>Customer Name</th>
<th>Item</th>
<th>Location</th>
<th>Order Name</th>
<th>Fiscal Week</th>
<th>Material Consumption Pegged Quantity</th>
</tr>
</thead>
<tbody>
<tr>
<td>W04-2015</td>
<td>FG_1 - Shipment via Air from DC_1 to RDC_1</td>
<td>FG_1</td>
<td>DC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
</tr>
<tr>
<td>W03-2015</td>
<td>FG_1 - Shipment via Air from Plant_1 to DC_1</td>
<td>FG_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
</tr>
<tr>
<td>W27-2015</td>
<td>FG_1 - Shipment via Water from - Plant_1 to DC_1</td>
<td>FG_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
</tr>
<tr>
<td>W29-2015</td>
<td>FG_1 - Shipment via Water from DC_1 to RDC_1</td>
<td>FG_1</td>
<td>DC_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
</tr>
<tr>
<td>W02-2015</td>
<td>Final Assembly for FG_1 at Plant_1</td>
<td>INT_11</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
</tr>
<tr>
<td>W25-2015</td>
<td>Final Assembly for FG_1 at Plant_1</td>
<td>INT_11</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
</tr>
<tr>
<td>W02-2015</td>
<td>Final Assembly for FG_1 at Plant_1</td>
<td>INT_21</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
</tr>
<tr>
<td>W25-2015</td>
<td>Final Assembly for FG_1 at Plant_1</td>
<td>INT_21</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
</tr>
<tr>
<td>W01-2015</td>
<td>Sub-Assembly for FG_1 - RM_1 converted to INT_11 at Plant_1</td>
<td>RM_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
</tr>
<tr>
<td>W24-2015</td>
<td>Sub-Assembly for FG_1 - RM_1 converted to INT_11 at Plant_1</td>
<td>RM_1</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
</tr>
<tr>
<td>W01-2015</td>
<td>Sub-Assembly for FG_1 - RM_2 converted to INT_21 at Plant_1</td>
<td>RM_2</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_1</td>
<td>W04-2015</td>
<td>400</td>
</tr>
<tr>
<td>W24-2015</td>
<td>Sub-Assembly for FG_1 - RM_2 converted to INT_21 at Plant_1</td>
<td>RM_2</td>
<td>Plant_1</td>
<td>000SCS_LOT</td>
<td>Cust_1</td>
<td>FG_1</td>
<td>RDC_1</td>
<td>Order_2</td>
<td>W31-2015</td>
<td>200</td>
</tr>
</tbody>
</table>
<h2 id="copymeasure">copymeasure</h2>
<h2 id="update">update</h2>
<h2 id="delete-data-for-model">delete data for model</h2>
<p>One may want to delete all interserctions (rows) and hence all measures within a measuregroup based on version or other member filters. One can achieve this through <code>delete data for model</code> command. Below is an example to delete data and intersections with the measuregroup <code>CapacityReports</code> only for <code>CurrentWorkingView</code> .</p>
<p>To begin with for every delete data example we start with a measuregroup SalesHistory having data as indicated by the below select query.</p>
<div class="codehilite"><pre><span></span><span class="k">select</span> <span class="p">([</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">]</span>  <span class="o">*</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="o">-</span><span class="k">Month</span><span class="p">]</span> <span class="o">*</span> <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">SKU</span><span class="p">]</span> <span class="o">*</span>
    <span class="err">{</span><span class="n">Measure</span><span class="p">.[</span><span class="n">SalesPrice</span><span class="p">],</span> <span class="n">Measure</span><span class="p">.[</span><span class="n">UnitsSold</span><span class="p">]</span><span class="err">}</span> <span class="p">)</span>
<span class="n">orderby</span> <span class="p">[</span><span class="k">Version</span><span class="p">].[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].</span><span class="n">Name</span> <span class="k">desc</span><span class="p">,</span> <span class="p">[</span><span class="n">Time</span><span class="p">].[</span><span class="k">Year</span><span class="o">-</span><span class="k">Month</span><span class="p">].</span><span class="k">Key</span>  <span class="k">asc</span>
<span class="k">limit</span> <span class="mi">100</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>SalesPrice</th>
<th>UnitsSold</th>
</tr>
</thead>
<tbody>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M5</td>
<td>Fructis Shine - 500</td>
<td>250</td>
<td>100</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M6</td>
<td>Fructis Strong - 500</td>
<td></td>
<td>100</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M5</td>
<td>Fructis Shine - 500</td>
<td>250</td>
<td>100</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M6</td>
<td>Fructis Strong - 500</td>
<td></td>
<td>100</td>
</tr>
</tbody>
</table>
<p>One can remove all data for CurrentWorkingView using below query. Results of the select will change after that.</p>
<div class="codehilite"><pre><span></span><span class="k">delete</span> <span class="k">data</span> <span class="k">for</span> <span class="n">model</span> <span class="p">[</span><span class="n">SalesHistory</span><span class="p">]</span> 
<span class="k">where</span> <span class="err">{</span><span class="k">Version</span><span class="p">.[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">]</span><span class="err">}</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>SalesPrice</th>
<th>UnitsSold</th>
</tr>
</thead>
<tbody>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M5</td>
<td>Fructis Shine - 500</td>
<td>250</td>
<td>100</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M6</td>
<td>Fructis Strong - 500</td>
<td></td>
<td>100</td>
</tr>
</tbody>
</table>
<p>One can remove all data for CurrentWorkingView and Fructis by using related memers for Fructis using query below or else one could use filter clause on <code>[Item].[SKU]</code> . Note that <code>Liril Shine - 40</code> rows will be retained. </p>
<div class="codehilite"><pre><span></span><span class="k">delete</span> <span class="k">data</span> <span class="k">for</span> <span class="n">model</span> <span class="p">[</span><span class="n">SalesHistory</span><span class="p">]</span> 
<span class="k">where</span> <span class="err">{</span><span class="k">Version</span><span class="p">.[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">CurrentWorkingView</span><span class="p">],</span>
            <span class="p">[</span><span class="n">Item</span><span class="p">].[</span><span class="n">Brand</span><span class="p">].[</span><span class="n">Fructis</span><span class="p">].</span><span class="n">relatedmembers</span><span class="p">([</span><span class="n">SKU</span><span class="p">])</span>
      <span class="err">}</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>SalesPrice</th>
<th>UnitsSold</th>
</tr>
</thead>
<tbody>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M5</td>
<td>Fructis Shine - 500</td>
<td>250</td>
<td>100</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M6</td>
<td>Fructis Strong - 500</td>
<td></td>
<td>100</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>One can also remove entries based on measure filter besides version filter using below query. Note that only one row is matching the criteria specified.</p>
<div class="codehilite"><pre><span></span><span class="k">delete</span> <span class="k">data</span> <span class="k">for</span> <span class="n">model</span> <span class="p">[</span><span class="n">SalesHistory</span><span class="p">]</span> 
<span class="k">where</span> <span class="err">{</span><span class="k">Version</span><span class="p">.[</span><span class="k">Version</span> <span class="n">Name</span><span class="p">].[</span><span class="n">ScenarioAllPlays</span><span class="p">],</span>
            <span class="o">~</span><span class="k">isnull</span><span class="p">(</span><span class="n">Measure</span><span class="p">.[</span><span class="n">SalesPrice</span><span class="p">]),</span>
            <span class="n">Measure</span><span class="p">.[</span><span class="n">UnitsSold</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span>
      <span class="err">}</span><span class="p">;</span>
</pre></div>


<table>
<thead>
<tr>
<th>Version Name</th>
<th>Year-Month</th>
<th>SKU</th>
<th>SalesPrice</th>
<th>UnitsSold</th>
</tr>
</thead>
<tbody>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
<tr>
<td>ScenarioAllPlays</td>
<td>2016-M6</td>
<td>Fructis Strong - 500</td>
<td></td>
<td>100</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M1</td>
<td>Liril Shine - 40</td>
<td>20</td>
<td>1</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M5</td>
<td>Fructis Shine - 500</td>
<td>250</td>
<td>100</td>
</tr>
<tr>
<td>CurrentWorkingView</td>
<td>2016-M6</td>
<td>Fructis Strong - 500</td>
<td></td>
<td>100</td>
</tr>
</tbody>
</table>
<h2 id="delete-data-for-relationshiptype">delete data for relationshiptype</h2>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../modify-members/" title="Modify members" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Modify members
              </span>
            </div>
          </a>
        
        
          <a href="../../transferring-data/transferring-data/" title="Transferring data" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Transferring data
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-77118858-8","ibpl-quick-ref.firebaseapp.com"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>